{"version":3,"sources":["redux/actions/index.ts","core/useSearchParams.ts","components/Gallery.tsx"],"names":["getCategories","type","actionTypes","getImages","params","getMoreImages","useSearchParams","names","useQuery","URLSearchParams","useLocation","search","query","forEach","name","get","Gallery","image","useSelector","state","history","useHistory","dispatch","useDispatch","React","useEffect","category_ids","className","isFetching","list","map","id","url","height","width","src","alt","onClick","limit","push"],"mappings":"iIAAA,iHAOaA,EAAgB,iBAAO,CAClCC,KAAMC,MAGKC,EAAY,SAACC,GAAD,MAAqB,CAC5CH,KAAMC,IACNE,WAGWC,EAAgB,SAACD,GAAD,MAAqB,CAChDH,KAAMC,IACNE,Y,gCClBF,WAUeE,IARS,WAAgC,IAA/BC,EAA8B,uDAAZ,GACnCC,EAAW,kBAAM,IAAIC,gBAAgBC,cAAcC,SACnDC,EAAQJ,IACRJ,EAAmC,GAEzC,OADAG,EAAMM,SAAQ,SAACC,GAAD,OAAWV,EAAOU,GAAQF,EAAMG,IAAID,MAC3CV,I,gCCPT,yEAiDeY,UAzCW,WACxB,IAAMC,EAAQC,aACZ,SAACC,GAAD,OAAWA,EAAMF,SAEbG,EAAUC,cACVC,EAAWC,cACXnB,EAASE,YAAgB,CAAC,QAAS,iBAEzCkB,IAAMC,WAAU,WACdH,EAASnB,YAAUC,MAElB,CAACkB,EAAUlB,EAAOsB,eAUrB,OACE,qBAAKC,UAAU,UAAf,SACGV,EAAMW,WACL,cAAC,IAAD,CAAQD,UAAU,iBAElB,qCACE,yBAASA,UAAU,SAAnB,SACGV,EAAMY,KAAKC,KAAI,gBAAGC,EAAH,EAAGA,GAAIC,EAAP,EAAOA,IAAKC,EAAZ,EAAYA,OAAQC,EAApB,EAAoBA,MAApB,OACd,qBAAcC,IAAKH,EAAKC,OAAQA,EAAQC,MAAOA,EAAOE,IAAI,OAAhDL,QAGd,qBAAKJ,UAAU,cAAcU,QAnBL,WAC9Bf,EAASjB,YAAcD,IADa,IAE5BkC,EAAwBlC,EAAxBkC,MAAOZ,EAAiBtB,EAAjBsB,aACfN,EAAQmB,KAAR,iCAC4BD,EAAQ,GADpC,yBACuDZ,KAejD","file":"static/js/3.364e553b.chunk.js","sourcesContent":["import * as actionTypes from \"../../constants/actionTypes\";\r\n\r\nexport interface Params {\r\n  limit: string;\r\n  category_ids: string;\r\n}\r\n\r\nexport const getCategories = () => ({\r\n  type: actionTypes.GET_CATEGORIES,\r\n});\r\n\r\nexport const getImages = (params: Params) => ({\r\n  type: actionTypes.GET_IMAGES,\r\n  params,\r\n});\r\n\r\nexport const getMoreImages = (params: Params) => ({\r\n  type: actionTypes.GET_MORE_IMAGES,\r\n  params,\r\n});\r\n","import { useLocation } from \"react-router-dom\";\r\n\r\nconst useSearchParams = (names: string[] = []): any => {\r\n  const useQuery = () => new URLSearchParams(useLocation().search);\r\n  const query = useQuery();\r\n  const params: { [index: string]: any } = {};\r\n  names.forEach((name) => (params[name] = query.get(name)));\r\n  return params;\r\n};\r\n\r\nexport default useSearchParams;\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { DefaultRootState } from \"../constants/types\";\r\nimport Loader from \"../core/loader\";\r\nimport useSearchParams from \"../core/useSearchParams\";\r\nimport { getImages, getMoreImages } from \"../redux/actions\";\r\n\r\nconst Gallery: React.FC = () => {\r\n  const image = useSelector<DefaultRootState, DefaultRootState[\"image\"]>(\r\n    (state) => state.image\r\n  );\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const params = useSearchParams([\"limit\", \"category_ids\"]);\r\n\r\n  React.useEffect(() => {\r\n    dispatch(getImages(params));\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [dispatch, params.category_ids]);\r\n\r\n  const handleOnMoreImagesClick = () => {\r\n    dispatch(getMoreImages(params));\r\n    const { limit, category_ids } = params;\r\n    history.push(\r\n      `/gallery/search?limit=${+limit + 10}&category_ids=${category_ids}`\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"gallery\">\r\n      {image.isFetching ? (\r\n        <Loader className=\"gallery-load\" />\r\n      ) : (\r\n        <>\r\n          <section className=\"photos\">\r\n            {image.list.map(({ id, url, height, width }) => (\r\n              <img key={id} src={url} height={height} width={width} alt=\"cat\" />\r\n            ))}\r\n          </section>\r\n          <div className=\"more-images\" onClick={handleOnMoreImagesClick}>\r\n            load more images\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Gallery;\r\n"],"sourceRoot":""}